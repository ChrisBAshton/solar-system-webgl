<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>CS32310 - Advanced Computer Graphics</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>

        <div class="container">
            <header>
                <ul>
                    <li>
                        <a href="#about">Toggle "About"</a>
                    </li>
                    <li>
                        <a href="#instructions">Toggle instructions</a>
                    </li>
                    <li>
                        <a href="#gui">Toggle GUI</a>
                    </li>
                    <li>
                        <a href="../api-docs/" target="_blank">Documentation</a>
                    </li>
                    <li>
                        <a href="https://github.com/ChrisBAshton/solar-system-webgl" target="_blank">GitHub</a>
                    </li>
                </ul>
            </header>

            <div id="webgl_solarsystem_about">
                <h2>CS32310: Advanced Computer Graphics</h2>

                <p>
                    This is a 3D visualisation of the solar system, written in WebGL. Unlike many examples on the web, this is written without the aid of libraries such as Three.js.
                </p>

                <p>
                    The planet sizes, axial tilts and orbital distances are all scientifically correct. Distances have been reduced by a uniform scale for aesthetic reasons.
                </p>

                <p>
                    Now, I invite you to 'Toggle "About"' to hide this box, then 'Toggle instructions' for information on how to interact with the program.
                </p>
            </div>

<!--
    #############################################################################
    #############################################################################
    #############################################################################
    #############################################################################
    #############################################################################
    #############################################################################
            LOOKING FOR CODE TO COPY AND PASTE, SO THAT YOU CAN PUT THIS
            ON YOUR OWN WEBSITE? LOOK NO FURTHER!
            COPY FROM HERE:
    #############################################################################
    #############################################################################
    #############################################################################
    #############################################################################
    #############################################################################
    #############################################################################
-->
            <div id="canvas_solar_system__container">
                <canvas id="canvas_solar_system" class="canvas_solar_system"></canvas>
            </div>

            <script id="webgl_solarsystem__shader--fragment" type="x-shader/x-fragment">
                precision mediump float;
                varying vec2 vTextureCoord;
                varying vec3 vTransformedNormal;
                varying vec4 vPosition;
                uniform float uMaterialShininess;
                uniform bool uShowSpecularHighlights;
                uniform bool uUseLighting;
                uniform bool uUseTextures;
                uniform vec3 uAmbientColor;
                uniform vec3 uPointLightingLocation;
                uniform vec3 uPointLightingSpecularColor;
                uniform vec3 uPointLightingDiffuseColor;
                uniform sampler2D uSampler;
                uniform float uAlpha;

                void main(void) {
                    vec3 lightWeighting;
                    if (!uUseLighting) {
                        lightWeighting = vec3(1.0, 1.0, 1.0);
                    } else {
                        vec3 lightDirection = normalize(uPointLightingLocation - vPosition.xyz);
                        vec3 normal = normalize(vTransformedNormal);
                        float specularLightWeighting = 0.0;
                        if (uShowSpecularHighlights) {
                            vec3 eyeDirection = normalize(-vPosition.xyz);
                            vec3 reflectionDirection = reflect(-lightDirection, normal);
                            specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), uMaterialShininess);
                        }
                        float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);
                        lightWeighting = uAmbientColor
                            + uPointLightingSpecularColor * specularLightWeighting * diffuseLightWeighting
                            + uPointLightingDiffuseColor * diffuseLightWeighting;
                    }
                    vec4 fragmentColor;
                    if (uUseTextures) {
                        fragmentColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
                    } else {
                        fragmentColor = vec4(1.0, 1.0, 1.0, 1.0);
                    }
                    gl_FragColor = vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a * uAlpha);
                }
            </script>

            <script id="webgl_solarsystem__shader--vertex" type="x-shader/x-vertex">
                attribute vec3 aVertexPosition;
                attribute vec3 aVertexNormal;
                attribute vec2 aTextureCoord;
                uniform mat4 uMVMatrix;
                uniform mat4 uPMatrix;
                uniform mat3 uNMatrix;
                varying vec2 vTextureCoord;
                varying vec3 vTransformedNormal;
                varying vec4 vPosition;
                void main(void) {
                    vPosition = uMVMatrix * vec4(aVertexPosition, 1.0);
                    gl_Position = uPMatrix * vPosition;
                    vTextureCoord = aTextureCoord;
                    vTransformedNormal = uNMatrix * aVertexNormal;
                }
            </script>

            <script src="js/lib/require.js" data-main="js/main.js"></script>
<!--
    #############################################################################
    #############################################################################
    #############################################################################
    #############################################################################
    #############################################################################
    #############################################################################
            ...TO HERE.

            THE SCRIPTS BELOW (JQUERY, ETC) ARE FOR STYLISTIC USE ON THIS
            TUTORIAL PAGE ONLY.
    #############################################################################
    #############################################################################
    #############################################################################
    #############################################################################
    #############################################################################
    #############################################################################
-->

            <script src="jquery.min.js"></script>
            <script>
                $(document).ready(function () {

                    function toggleElement(elementName) {
                        var element = $('#webgl_solarsystem_' + elementName);
                        if (element.css('display') === 'none') {
                            element.show('slow');
                        } else {
                            element.hide('fast');
                        }
                    }

                    function respondToClick (event) {
                        event.preventDefault();
                        toggleElement($(this).attr('href').substring(1));
                        return false;
                    }

                    $('a[href="#instructions"]').on('click', respondToClick);
                    $('a[href="#gui"]').on('click', respondToClick);
                    $('a[href="#about"]').on('click', respondToClick);

                    function waitUntilLoadedThenHide(elements) {
                        if ($('body').hasClass('webgl_solarsystem__loaded')) {
                            for (var i = 0; i < elements.length; i++) {
                                toggleElement(elements[i]);
                            }
                        } else {
                            setTimeout(function () {
                                waitUntilLoadedThenHide(elements);
                            }, 50);
                        }
                    }

                    waitUntilLoadedThenHide(['instructions']);
                });
            </script>
        </div>
    </body>
</html>